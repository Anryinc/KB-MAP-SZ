<!DOCTYPE html>
<html>
<head>
    <title>Карта сотрудников</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        #map { height: 800px; }
    </style>
</head>
<body>
    <div id="map"></div>
   <script>
  // Загрузка данных
  Promise.all([
    fetch('employees.json').then(res => res.json()),
    fetch('cities_coordinates.json').then(res => res.json())
  ]).then(([cities, citiesCoords]) => {
    const map = L.map('map').setView([55.7558, 37.6176], 5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    // Добавление маркеров
    cities.forEach(city => {
      const coordinates = citiesCoords[city.name]; // Получаем координаты из cities_coordinates.json
      if (coordinates) {
        const marker = L.marker(coordinates).addTo(map);
        marker.bindPopup(`
          <b>${city.name}</b><br>
          ${city.employees.map(e => `${e.name} (${e.department})`).join('<br>')}
        `);
      }
    });
  });
</script>
</body>
</html>
