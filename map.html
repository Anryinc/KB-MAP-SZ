<script>
  // Загрузка данных
  Promise.all([
    fetch('employees.json').then(res => res.json()),
    fetch('cities_coordinates.json').then(res => res.json())
  ]).then(([cities, citiesCoords]) => {
    const map = L.map('map').setView([55.7558, 37.6176], 5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    // Добавление маркеров
    cities.forEach(city => {
      const coordinates = citiesCoords[city.name]; // Получаем координаты из cities_coordinates.json
      if (coordinates) {
        const marker = L.marker(coordinates).addTo(map);
        marker.bindPopup(`
          <b>${city.name}</b><br>
          ${city.employees.map(e => `${e.name} (${e.department})`).join('<br>')}
        `);
      }
    });
  });
</script>
